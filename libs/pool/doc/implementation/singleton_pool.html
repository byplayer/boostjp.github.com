<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<HTML>
<HEAD>
<TITLE>Singleton Pool Implementation</TITLE>
<LINK HREF="../pool.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY>

<IMG SRC="../../../../c++boost.gif" WIDTH=276 HEIGHT=86 ALT="C++ Boost">

<H1 ALIGN=CENTER>Singleton Pool の実装</H1>

<P>
<H2>依存性</H2>

<P>
Boostヘッダー <SPAN CLASS="code">&quot;pool.hpp&quot;</SPAN> (<A HREF="pool.html">pool.html</A>を見よ)、<SPAN CLASS="code">&quot;detail/singleton.hpp&quot;</SPAN> (<A HREF="singleton.html">singleton.html</A>を見よ)、<SPAN CLASS="code">&quot;detail/mutex.hpp&quot;</SPAN> (<A HREF="mutex.html">mutex.html</A>を見よ)、<SPAN CLASS="code">&quot;detail/guard.hpp&quot;</SPAN> (<A HREF="guard.html">guard.html</A>を見よ)をインクルードしている。

<P>
<H2>梗概</H2>

<PRE CLASS="code">template &lt;typename Tag,
    unsigned RequestedSize,
    typename UserAllocator = default_user_allocator_new_delete,
    typename Mutex = details::pool::default_mutex,
    unsigned NextSize = 32&gt;
class singleton_pool
{
  ... // 公開インタフェース

  public: // 公開インタフェースの拡張
    typedef Mutex mutex;
    static const unsigned next_size = NextSize;
};</PRE>

<P>
<H2>公開インタフェースの拡張</H2>

<P>
<H3>追加テンプレートパラメータ</H3>

<P>
<H4 CLASS="code">Mutex</H4>

<P>
このクラスは<A HREF="mutex.html">mutex</A>型のもので基底であるPoolへの同時アクセスを保護するために使用する。
これは開示されているので、ユーザーはシングルトンプールを通常の様(つまり同期して)に記述することもできるし、効率のために、シングルトンプールを(<SPAN CLASS="code">details::pool::null_mutex</SPAN> を指定して)同期制御無しにすることもできる。

<P>
<H4 CLASS="code">NextSize</H4>

<P>
基底となる Pool が生成されるとき、このパラメーターの値が渡される。
より詳しい情報は <A HREF="pool.html">pool</A> の公開インタフェースの拡張を見よ。

<P>
<H3>追加メンバー</H3>

<P>
typedef である <SPAN CLASS="code">mutex</SPAN> と静的定数値 <SPAN CLASS="code">next_size</SPAN> はテンプレートパラメータの値 <SPAN CLASS="code">Mutex</SPAN> と <SPAN CLASS="code">NextSize</SPAN> をそれぞれにクラス外に見せる。
<P>

<H2>将来の方向性</H2>

<P>
Boost multithreading library が完成すれば、<SPAN CLASS="code">Mutex</SPAN> パラメーターは同等の柔軟性を提供する、そのライブラリーの何かで置き換えられ、実装の詳細からインタフェース仕様へ移動されることになるだろう。

<P>
<H2><A HREF="../interfaces/singleton_pool.html">インタフェースの説明</A></H2>

<P>
<HR>

<P>
Copyright &copy; 2000, 2001 Stephen Cleary (<A HREF="mailto:shammah@voyager.net">shammah@voyager.net</A>)

<P>
This file can be redistributed and/or modified under the terms found in <A HREF="../copyright.html">copyright.html</A>

<P>
This software and its documentation is provided &quot;as is&quot; without express or implied warranty, and with no claim as to its suitability for any purpose.

</BODY>
</HTML>
